<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ® æˆ‘çš„æ•°å­—åŸºåœ°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          keyframes: {
            'float': { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-6px)' } }
          },
          animation: { 'float': 'float 3s ease-in-out infinite' }
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      transition: background-color 0.4s, color 0.4s;
    }

    .banner-default {
      background: linear-gradient(90deg, #ff416c, #ff4b2b);
    }

    .app-card {
      backdrop-filter: blur(10px);
      border-radius: 16px;
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .app-card:hover {
      transform: translateY(-4px) scale(1.03);
      box-shadow: 0 10px 30px rgba(255, 75, 43, 0.3);
    }

    .glow-btn {
      position: relative;
      overflow: hidden;
    }
    .glow-btn::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -60%;
      width: 20px;
      height: 200%;
      background: rgba(255, 255, 255, 0.3);
      transform: rotate(25deg);
      transition: all 0.6s;
    }
    .glow-btn:hover::after {
      left: 120%;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }

    .theme-toggle {
      width: 52px;
      height: 26px;
      background: #ccc;
      border-radius: 13px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s;
    }
    .theme-toggle::before {
      content: '';
      position: absolute;
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: white;
      top: 2px;
      left: 2px;
      transition: transform 0.3s;
    }
    .dark .theme-toggle {
      background: #4b5563;
    }
    .dark .theme-toggle::before {
      transform: translateX(26px);
    }

    /* æœç´¢æ¡†æ ·å¼ */
    #searchInput {
      width: 100%;
      max-width: 500px;
      padding: 10px 16px;
      border-radius: 30px;
      border: none;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(10px);
      color: white;
      font-size: 1rem;
      margin-top: 12px;
    }
    #searchInput::placeholder {
      color: rgba(255,255,255,0.7);
    }
    .dark #searchInput {
      background: rgba(0,0,0,0.2);
      color: white;
    }
  </style>
</head>
<body class="min-h-screen pb-12">

  <!-- ç²’å­èƒŒæ™¯ -->
  <div id="particles-js"></div>

  <!-- é¡¶éƒ¨æ¨ªå¹… -->
  <div id="topBanner" class="h-20 w-full relative flex items-center px-4">
    <div class="text-white font-bold text-lg">ğŸ® æˆ‘çš„æ•°å­—åŸºåœ°</div>
    <div class="ml-auto mr-4">
      <div class="theme-toggle" onclick="toggleTheme()"></div>
    </div>
  </div>

  <!-- æœç´¢æ¡†ï¼ˆä»…åœ¨æœ‰åº”ç”¨æ—¶æ˜¾ç¤ºï¼‰ -->
  <div id="searchContainer" class="max-w-4xl mx-auto px-4 mt-4 hidden">
    <input type="text" id="searchInput" placeholder="ğŸ” æœç´¢ä½ çš„åº”ç”¨..." oninput="filterApps()" />
  </div>

  <!-- åº”ç”¨ç½‘æ ¼ -->
  <div id="appsContainer" class="max-w-4xl mx-auto px-4 mt-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-5"></div>

  <!-- ç™»å½•æ¨¡æ€æ¡† -->
  <div id="loginModal" class="hidden fixed inset-0 flex items-center justify-center z-50">
    <div class="bg-gray-900 p-6 rounded-xl w-80 backdrop-blur-sm border border-gray-700">
      <h3 class="text-center font-bold text-lg mb-2 text-red-300">ğŸ” ç®¡ç†å‘˜ç™»å½•</h3>
      <input id="userInput" type="text" placeholder="ç”¨æˆ·å" class="w-full px-4 py-2.5 mb-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500" />
      <input id="pwdInput" type="password" placeholder="å¯†ç " class="w-full px-4 py-2.5 mb-4 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-red-500" />
      <button onclick="tryLogin()" class="w-full py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold rounded-lg glow-btn">ç™»å½•</button>
      <button onclick="closeModal('loginModal')" class="mt-2 w-full py-2 text-gray-400 hover:text-white">å–æ¶ˆ</button>
    </div>
  </div>

  <!-- ç®¡ç†é¢æ¿ -->
  <div id="adminPanel" class="hidden max-w-4xl mx-auto px-4 mt-6">
    <div class="flex flex-wrap justify-center gap-3">
      <button onclick="addApp()" class="px-5 py-2.5 bg-green-600 hover:bg-green-500 rounded-full font-medium glow-btn">â• æ·»åŠ åº”ç”¨</button>
      <button onclick="deleteApp()" class="px-5 py-2.5 bg-red-600 hover:bg-red-500 rounded-full font-medium glow-btn">ğŸ—‘ï¸ åˆ é™¤åº”ç”¨</button>
      <button onclick="setBanner()" class="px-5 py-2.5 bg-purple-600 hover:bg-purple-500 rounded-full font-medium glow-btn">ğŸ–¼ï¸ æ›´æ¢æ¨ªå¹…</button>
      <button onclick="logout()" class="px-5 py-2.5 bg-gray-700 hover:bg-gray-600 rounded-full font-medium glow-btn">ğŸšª é€€å‡ºç®¡ç†</button>
    </div>
  </div>

  <script>
    // ===== è´¦å·é…ç½® =====
    const ADMIN_USER = 'yaolei001';
    const ADMIN_PASS = '135246Asd';

    // é»˜è®¤æ— åº”ç”¨ï¼ˆæŒ‰ä½ è¦æ±‚ï¼‰
    let apps = JSON.parse(localStorage.getItem('my_apps_v4')) || [];
    let bannerUrl = localStorage.getItem('my_banner_v4') || '';
    let isAdmin = localStorage.getItem('is_admin_v4') === 'true';
    let isDark = localStorage.getItem('theme') !== 'light';

    // ===== åˆå§‹åŒ– =====
    function initTheme() {
      if (isDark) document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
    }

    function initParticles() {
      particlesJS('particles-js', {
        particles: {
          number: { value: isDark ? 80 : 50, density: { enable: true, value_area: 800 } },
          color: { value: isDark ? "#ffffff" : "#888888" },
          shape: { type: "circle" },
          opacity: { value: 0.4, random: true },
          size: { value: 3, random: true },
          move: {
            enable: true,
            speed: 1.2,
            direction: "none",
            random: true,
            out_mode: "out"
          }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" }
          },
          modes: {
            repulse: { distance: 100 },
            push: { particles_nb: 4 }
          }
        },
        retina_detect: true
      });
    }

    function toggleTheme() {
      isDark = !isDark;
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      initTheme();
      initParticles();
    }

    // ===== é•¿æŒ‰è§¦å‘ç™»å½• =====
    let pressTimer = null;
    const BANNER = document.getElementById('topBanner');
    BANNER.addEventListener('mousedown', () => {
      pressTimer = setTimeout(() => showLogin(), 1500);
    });
    ['mouseup', 'mouseleave'].forEach(evt => {
      BANNER.addEventListener(evt, () => clearTimeout(pressTimer));
    });

    // ===== æ¸²æŸ“ & æœç´¢ =====
    function renderApps(filtered = null) {
      const container = document.getElementById('appsContainer');
      const list = filtered !== null ? filtered : apps;
      container.innerHTML = '';

      if (list.length === 0) {
        container.innerHTML = `<div class="col-span-full text-center py-8 text-gray-500">æš‚æ— åº”ç”¨</div>`;
        document.getElementById('searchContainer').classList.add('hidden');
        return;
      }

      document.getElementById('searchContainer').classList.remove('hidden');
      list.forEach((app, idx) => {
        const card = document.createElement('div');
        card.className = 'app-card p-5 text-center cursor-pointer group ' +
          (isDark ? 'bg-gray-800/30 border border-gray-700' : 'bg-white/40 border border-gray-300');

        let clickHandler = () => window.open(app.link, '_blank');
        if (isAdmin) {
          // ç®¡ç†å‘˜ç‚¹å‡»å¡ç‰‡å¯é€‰æ‹©åˆ é™¤
          clickHandler = () => {
            if (confirm(`è¦åˆ é™¤ã€Œ${app.name}ã€å—ï¼Ÿ\nï¼ˆç‚¹â€œå–æ¶ˆâ€æ­£å¸¸æ‰“å¼€ï¼‰`)) {
              apps.splice(idx, 1);
              save();
              renderApps();
            } else {
              window.open(app.link, '_blank');
            }
          };
        }

        card.innerHTML = `
          <div class="text-4xl mb-2 group-hover:scale-110 transition-transform">${app.icon}</div>
          <div class="font-semibold text-sm truncate">${app.name}</div>
          <div class="mt-2 text-xs bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent font-bold">Launch</div>
        `;
        card.onclick = clickHandler;
        container.appendChild(card);
      });
    }

    function filterApps() {
      const term = document.getElementById('searchInput').value.toLowerCase().trim();
      if (!term) {
        renderApps();
        return;
      }
      const filtered = apps.filter(a => a.name.toLowerCase().includes(term));
      renderApps(filtered);
    }

    // ===== ç®¡ç†åŠŸèƒ½ =====
    function showAdminPanel() {
      document.getElementById('adminPanel').classList.remove('hidden');
    }

    function hideAdminPanel() {
      document.getElementById('adminPanel').classList.add('hidden');
    }

    function save() {
      localStorage.setItem('my_apps_v4', JSON.stringify(apps));
      localStorage.setItem('my_banner_v4', bannerUrl);
      localStorage.setItem('is_admin_v4', String(isAdmin));
    }

    function showLogin() {
      document.getElementById('loginModal').classList.remove('hidden');
    }

    function closeModal(id) {
      document.getElementById(id).classList.add('hidden');
    }

    function tryLogin() {
      const user = document.getElementById('userInput').value.trim();
      const pass = document.getElementById('pwdInput').value;
      if (user === ADMIN_USER && pass === ADMIN_PASS) {
        isAdmin = true;
        save();
        showAdminPanel();
        closeModal('loginModal');
        renderApps(); // åˆ·æ–°ä»¥å¯ç”¨ç®¡ç†ç‚¹å‡»
      } else {
        alert('âŒ ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯');
      }
    }

    function logout() {
      isAdmin = false;
      save();
      hideAdminPanel();
      renderApps(); // åˆ‡å›æ™®é€šæ¨¡å¼
    }

    function addApp() {
      if (!isAdmin) return;
      const name = prompt('åº”ç”¨æŸ¥çœ‹åç§°ï¼Ÿï¼ˆå¦‚ï¼šSteamï¼‰');
      if (!name) return;
      const icon = prompt('å›¾æ ‡ï¼ˆæ”¯æŒ emojiï¼Œå¦‚ ğŸ®ï¼‰ï¼Ÿ');
      if (!icon) return;
      let link = prompt('å®Œæ•´ç½‘å€ï¼Ÿï¼ˆå¦‚ https://store.steampowered.comï¼‰');
      if (!link) return;
      if (!link.startsWith('http')) link = 'https://' + link;
      apps.push({ name: name.trim(), icon: icon.trim(), link: link.trim() });
      save();
      renderApps();
    }

    function deleteApp() {
      if (!isAdmin || apps.length === 0) {
        alert('æ²¡æœ‰å¯åˆ é™¤çš„åº”ç”¨');
        return;
      }
      const list = apps.map((a, i) => `${i+1}. ${a.name}`).join('\n');
      const idx = prompt(`è¾“å…¥è¦åˆ é™¤çš„åº”ç”¨åºå·ï¼š\n${list}`);
      const i = parseInt(idx) - 1;
      if (i >= 0 && i < apps.length) {
        apps.splice(i, 1);
        save();
        renderApps();
        alert('âœ… å·²åˆ é™¤');
      } else {
        alert('æ— æ•ˆåºå·');
      }
    }

    function setBanner() {
      if (!isAdmin) return;
      const url = prompt('è¾“å…¥æ¨ªå¹…å›¾ç‰‡ URLï¼ˆå»ºè®® 1920x300ï¼‰ï¼š\nç•™ç©ºæ¢å¤é»˜è®¤');
      bannerUrl = url?.trim() || '';
      save();
      init(); // é‡æ–°åˆå§‹åŒ–æ•´ä¸ªé¡µé¢
    }

    function init() {
      initTheme();
      initParticles();

      const bannerEl = BANNER;
      if (bannerUrl) {
        bannerEl.style.backgroundImage = `url(${bannerUrl})`;
        bannerEl.style.backgroundSize = 'cover';
        bannerEl.style.backgroundPosition = 'center';
      } else {
        bannerEl.classList.add('banner-default');
      }

      renderApps();
      if (isAdmin) showAdminPanel();
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
